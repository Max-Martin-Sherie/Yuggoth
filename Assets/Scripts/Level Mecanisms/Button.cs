using UnityEngine;

/// <summary>
/// Items from this class will act like portal buttons
/// </summary>

public class Button : MonoBehaviour
{
    [SerializeField][Tooltip("activator layers")]private LayerMask m_activators;
    
    [SerializeField][Tooltip("the width until which the button will be pressed")]private float m_minimumShrinkWidth = 0.5f;
    [SerializeField][Tooltip("the speed at which the button wil be pressed")]private float m_shrinkSpeed = 10f;

    [HideInInspector]public bool m_triggered; //the bool that will activate if the button is triggered
    private float m_startWidth; //the original width of the button
    private void Start()
    {
        m_triggered = false;
        m_startWidth = transform.localScale.y; //Fetching the original width of the button
    }
    private void OnCollisionEnter(Collision p_other)
    {
        //If the button is activated by one of the activators
        if ((m_activators.value & (1 << p_other.gameObject.layer)) > 0)
        {
            Debug.Log("triggered");
            m_triggered = true;
        }
    }

    private void OnCollisionStay(Collision p_other)
    {
        //While the button is pressed the button will animate
        if (m_triggered && transform.localScale.y >= m_minimumShrinkWidth)
        {
            float y = Mathf.Lerp(transform.localScale.y, m_minimumShrinkWidth, m_shrinkSpeed * Time.deltaTime);
            transform.localScale = new Vector3(transform.localScale.x, y,transform.localScale.z);
        }
    }

    private void OnCollisionExit(Collision p_other)
    {
        //Resseting the button on unpress
        m_triggered = false;
        transform.localScale = new Vector3(transform.localScale.x, m_startWidth,transform.localScale.z);;
    }
}












/*(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((#%%%%%&&&&&&%%%%%%%#####################%%%%%%%%%%%##((////////////////((/((/(((/((((((((((((((((((((((((((((((((((
(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%%&%&&&&&&&%%%%######(((((((((((((((((((((#####%%%%%%%#(((//////////////////((///(((((((((((((((((((((((((((((((((((
(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((#%&&&&&&&&&&%%%%######((((((((//////////(((((((((#####%%%##(((////////////////////////(((((((((((((((((((((((((((((((((
((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%&&&&&&&&&&%%%%#######((((((((///////////////((((((((((##%###((///////////////////////(((((((((((((((((((((((((((((((((
(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%&&&&&&&&&&&%%%########(((((((((////////////////((((((((((##%##((//////////////////////(((((((((((((((((((((((((((((((((
((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%&&&&&&&&&&%%%#########((((((((((//////////////////((((#####%%%#(((//////////////////////((((((((((((((((((((((((((((((((
(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((#%&&&&&&&&&&%%#########(((((((((((/////////////////////(((###%%%%%((((////////////////////////(((((((((((((((((((((((((((((
((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((#%&&&&&@@@&&%##########((((((((((((////////////////////////(##%&&&&%#((//////////////////////((/((((((((((((((((((((((((((((
#####(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((#&&&&@@@@@&%%%%%%%%%%%%######(((((((((((////////////////////((#%&&&&#(////////////////////////(((//(((((((((((((((((((((((((
#######((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((#%&&&@@@@@@@&&&&&&&&&&&&&&&&%%%###((((((((((((((#######((((///(#%&&&&&#(///////////////////////(((/((((((((((((((((((((((((((
#############(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((#%&&&@@@@@@@@@&&&&&%%%%%%%%%&&&&&&&%%########%%%&&%%%%%%%%###(((#%&&&&&%((/////////////////////////(((((((((((((((((((((((((((
################((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%&&@@@@@@@&&&&%%%&&&&&&&&&&%&&&&&&&&&&&&&&&%%%%%%%#########%%&&&&&&&&&&%((////////////////////////////((((((((((((((((((((((((
######################((((((((((((((((((((((((((((((((((((((((((((((((((((%&@@@@@@&&%%&&%%%%%&&&&&&&&&%%%%%%&&&&&&&%###%%%%%%&%%%%%%%###%&@@@&&&&&(/////////////////////////////((((((((((((((((((((((((
##########################((((((((((((((((((((((((((((((((((((((((((((((((%@@@@@@@&%%%%&%###%%%%%%%%%%%%%%%%&&%###%%#(##%%%%%&&&&&&%%%###%&#%&&&%%(//////////////////////////////(((((((((((((((((((((((
##########################((((((((((((((((((((((((((((((((((((((((((((((((#&@@@@@@&%%%%%%%###############%&&%%#((((%%(((####%%%%%%##(((((%#((%&%#((///////////////////////////////((((((((((((((((((((((
############################(((((((((((((((((((((((((((((((((((((((((((((((%&@@@@&%%%%%%%%%%%##########%%&&%%#((((((##((/(((((##((((((((%#//(#%#(((////////////////////////////////(((((((((((((((((((((
###############################(((((((((((((((((((((((((((((((((((((((((((((%@@@@&%%%%%%##%%%######%%%%%%%%%##(((////(%##(((((((((((((##((//(##(((((///////////////////////////////(((((((((((((((((((((
#################################(((((((((((((((((((((((((((((((((((((((((((#&@@@&%%%##########((######%%%%%%%###((((((#%%%%########(((/////(##((((////////////////////////////////(((((((((((((((((((((
###################################((((((((((((((((((((((((((((((((((((((((((#%&&&%%%%################%%%%%%&%%%##%%#(((###((((((///////////(##((((////////////////////////////////(((((((((((((((((((((
#################################(((((((((((((((((((((((((((((((((((((((((((((##%%%%%%%################%%%%%%%%##((###(((#####((((/////////(##(((////////////////////////////////(((((((((((((((((((((((
####################################(((((((((((((((((((((((((((((((((((((((((((((##%%%%%%%####################(((((//////((#####(((////(/(((#(((/////////////////////////////////(((((((((((((((((((((((
######################################((((((((((((((((((((((((((((((((((((((((((((#%%%%%%%%##########%%%%%%%######((//////(##%###(((((((((((#(((/////////////////////////////(((((((((((((((((((((((((((
########################################(((((((((((((((((((((((((((((((((((((((((((%%%%%%%%%%####%%%%&&&&&&&%%%%%%%%%%#((/((##%###(((((((((##(((////////////////////////////(///((((((((((((((((((((((((
############################################(((((((((((((((((((((((((((((((######%%%%%%%%%######%%&&&&&&&%%%########%%&&%%#######(((((((((#%##((((((((((/(((///////////////(((((((((((((((((((((((((((((
###############################################(#(((((((((((((########%%%%%&&&&&&&&&%%%%%#######%%%&&&&&%%%%#########%%%%######((((((((((#%%%##(((((((((((((((((((((((((((((((((((((((((((((((((((((((((
########################################################%%%%%%%%%%&&&&&@@@@@&&&&&&&%%%%%%%########%%%%&&&%%%%%%%%%#####((///((((((((((((#%&&&&&&&&&%%##((((((((((((((((((((/((((((((((((((((((((((((((((
###########################################%%%%%%%%%%&&&&&&&&@@@@@@@@@@&&&&&&%%%%%%%%%%%%%%%########%%%%%%%%%%%%%###((((/////(((((((((((((((#%&@@@@@@@@@@@@@@&&#((((((((((((((((((((((((((((((((((((((((
######################################%%%%%&&&&&&@@@@@@@@@@@@@@@@@@@@&&%%%%%%%%%%%%%%%%%%%%%%%##############((((((((/////////(((((((((((((((((((%&@@@@@@@@@@@@@@@@@@@&#(((((((((((((((((((((((((((((((((
#################################%%%%%&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@&&%#####%%%%%%%%%%%%%%%%%%%%%#######((((((//////////////((((((((((((((///(((#%&&@@@@@@@@@@@@@@@@@@@@@@@&%#((((((((((((((((((((((((((
#############################%%%%%%&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%######%%%%%%%%%%%%%%%%%%%%%%%######((((((//////////(((((((((((//(((///((((##%&@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%((((((((((((((((((((((
#####%%%%###############%%%%%%&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%#######%%%%%%%%%%%%%%%%%%%%%%%%#####((((((((////(((((((((((((///////(((((((##%&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&#((((((((((((((((((
%%%%%%%%##%%%%%%%%%%%%%%%%%&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%########%%%%%%%%%%%%%%%%%%%%%%%%%%%######((((((((((((((((((((/////(((((((((((#&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%(((((((((((((((
%%%%%%%%%%%%%%%%%%%%%%%&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%##(#(####%%%%%%%%%%%%%%%%%%%%%%%%%%%%%######((((((((((((((((((/////((((((((((#%&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#(((((((((((
%%%%%%%%%%%%%%%%%%%&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%#(#(#((###%%%%%%%%%%%%%%%%###################(((((((((((((((((/////(((((((((##&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&#((((((((
###################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%########(((((((((((((((((((((((((((#(((((((((/((((((((((((((((((((((///////////(((((((#########%%%#%##%%#%####%#######################(((((
#%%%%%%%%%%##%#%%%%####%%%%%#%%%%%###(((((((##%%%%%%%%%%%%%%%#((((///((##%%%%%%%%###(((/////((#%%%%%%%%%###(((((#%%%%%%%%%%%%%%%#((###%%%%%%%%%%%%##((////((#%%%%%%%%%%%%%%%######%%%%%%%%%%%%##((//////
%%%%%&&&&&&&&%%%%%%%##%&&&&&&&&&&&&&%%##(((###%%%%&&&&&&%%%%%##((((#%%%&&&&&&%%%%%%%%######%%&&&&%%%%%%%%%%#####%%&&%%%%%%%%#%###((##%%&&&%%%%%%%&&%%#((((((#%%&%%%%#######((((##%%%%%%%%%%%%&&&%%#((//(
//(((#%%&&%#((((////((#%%%%######%%%%%%#((((/////(#%%%%#((((////(##%%&%%%##(((///(((((((#%%%%%%##((((////((((((##%%##((////********(##%&%%#((((#%%%%%%#((((##%%%##(////*******((##%%#(((//(((#%%%%%#((((
///(((#%&&%#((((////((#%%%%#((####%%%%%#((((////((#%&&%##((((((((#%%%%#(((((/////////((#%%&%%#(((((///////////(##%%%##(((/(///**////(#%&%%#((((##%%%%%#((((##%%%##(((((///////((##%%#((//////((#%%%%#(((
///((#%%&%%#((((////((#%&&%###%%%%%%%%#(((//////((#%%&%##((((((((%%&%%#####%%%%&%%%%%%%%%&%%#####%%%%&%%%%%####%%%&&&&&&&&&&&%%##((##%%&&&%%%%%%%%%%%#(((((##%%&&&&&&&&&&%%%#####%%%#((///////(#%%%%#(((
////((#%&%%#((((///((##%&&&&&&&&&&&%##(((////////(#%%&%##(((((((#%&&%##(((####%%%&&%%%%%&&%%##(#######%%&%%#####%%%%%%#######((((((((#%&&&&&&&&&&%%##(////((#%%%%%#####(((((((((#%%%%#((/////((#%%%%#(((
////(##%&%%#((((///((##%&&&%%%%&%%%%#(((////////((#%%%%##((((((((#%%%%#((((//((##%%%%%%%%&&%#((((///((#%%%######%%%%#((////*******//(#%%%%%%%%%%%%%#(//////(##%%##((/////****/(((#%%%#(//////((#%%%##(((
////(##%&%%#((((///(((#%&&%####%%%%%%#((((///////(#%%%%#(((((///(#%%%%%##((/((((#%%%%##%%%&%%##((((((##%%%%#((##%%%%#((/////*****//((#%&%%##(##%%%%%#(((((((#%%%#((/////****////(#%%##(//((((#%%&%%#((((
////((#%&&%#((((///(((#%%%%#((####%%%%%#((((((((#%%&&&&%%####(((((##%%&%%%%%%%%%%&%%%####%%&&&%%%%%#%%%&%%%#####%%%&%%%######(((((((#%%&%%#(((###%%%%%#(((###%%%%%%%########(((#%%%&&%%%%%%%&&&%%%#(////